@page "/"
@using WeddingSite.Client.Services.Abstractions
@inject IDataService DataService

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

<input type="text" placeholder="Passphrase" @bind-value="@passphraseValue" />
<button @onclick="GetToken">Get Token</button>

<hr />

<p>@text</p>

@code {
    private string passphraseValue = string.Empty;
    private string text = string.Empty;

    private async Task GetToken()
    {
        var currentPassphrase = passphraseValue;
        var result = await DataService.GetAuthTokenAsync(currentPassphrase);

        if (result == currentPassphrase)
        {
            text = "Couldn't find an invitation with that passphrase!";
        }

        text = result;

        StateHasChanged();
    }

}